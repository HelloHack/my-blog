<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="theme-color" content="#202020">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <title>Coding Is Fun</title>

    <link rel="stylesheet" href="external/bootstrap/dist/css/bootstrap.css">
    <script src="external/jquery/dist/jquery.js"></script>
    <script src="external/bootstrap/dist/js/bootstrap.js"></script>
    <script src="external/angular/angular.js"></script>
    <script src="external/angular-route/angular-route.js"></script>
    <script src="external/angular-resource/angular-resource.js"></script>
    <script src="external/angular-animate/angular-animate.js"></script>

    <script type='text/javascript'>
        var Resource = (function(){
            var resMap = {
               version : '1.0.0',
               urls : ['app.css',
                        'app.animate.css',
                        'app.module.js',
                        'app.config.js',
                        'core/core.module.js',
                        'core/trustAsHtml/trustAsHtml.filter.js',
                        'core/posts/posts.module.js',
                        'core/posts/posts.service.js',
                        'core/site-pages/site-pages.module.js',
                        'core/site-pages/site-pages.service.js',
                        'post-list/post-list.module.js',
                        'post-list/post-list.component.js',
                        'post-detail/post-detail.module.js',
                        'post-detail/post-detail.component.js',
                        'about/about.module.js',
                        'about/about.component.js',
                        'sidebar/sidebar.module.js',
                        'sidebar/sidebar.component.js']
            };

            function ResourceImplement() {
                var self = this;
                var head = document.getElementsByTagName('head')[0];
                var urlIndex = 0;
                var _onReady;

                self.init = function() {
                    _loadRes(resMap.urls[0], _callback);
                };

                self.versioningUrl = function(url) {
                    return 'static/' + resMap.version + '/' + url;
                };

                self.ready = function(onReady){
                    _onReady = onReady;
                    return self;
                };

                var _callback = function() {
                    urlIndex++;

                    if (urlIndex < resMap.urls.length) {
                       _loadRes(resMap.urls[urlIndex], _callback);
                    } else {
                       _onReady();
                    }
                };

                var _loadRes = function(url, callback) {
                     var element;

                     if (url.endsWith('.js')) {
                         element = document.createElement('script');

                         element.type = 'text/javascript';
                         element.src = self.versioningUrl('js/' + url);
                     } else if (url.endsWith('.css')) {
                         element = document.createElement('link');

                         element.rel = 'stylesheet';
                         element.href = self.versioningUrl('css/' + url);
                     } else {
                        console.log('unknown resource type: ' + url);
                        callback();
                        return;
                     }

                     element.onload = callback;
                     element.onreadystatechange = function() {
                        if (this.readyState == 'complete') {
                            callback();
                        }
                     }

                     head.appendChild(element);
                };
            }

            return new ResourceImplement();
        })();

        $(document).ready(function(){
            Resource.ready(function() {
                               angular.element(function() {
                                    angular.bootstrap(document, ['blogApp']);
                               });
                     })
                    .init();
        });
    </script>
</head>

<body>
    <sidebar></sidebar>

    <div class="content">
        <div ng-view class="view-frame"></div>
    </div>
</body>

<link href="https://fonts.googleapis.com/css?family=Play" rel="stylesheet">
</html>